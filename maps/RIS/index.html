<!DOCTYPE html>
<html>
<head>
<meta name="viewport"></meta>
<title>Lane County Restaurant Scores - Google Fusion Tables</title>
<style type="text/css">
html, body, #googft-mapCanvas {
	height: 400px;
	margin: 0;
	padding: 0;
	width: 100%;
}
</style>

<script type="text/javascript" src="https://maps.google.com/maps/api/js?sensor=false&amp;v=3"></script>

<script type="text/javascript">
	function initialize() {
		google.maps.visualRefresh = true;
		var isMobile = (navigator.userAgent.toLowerCase().indexOf('android') > -1) ||
			(navigator.userAgent.match(/(iPod|iPhone|iPad|BlackBerry|Windows Phone|iemobile)/));
		if (isMobile) {
			var viewport = document.querySelector("meta[name=viewport]");
			viewport.setAttribute('content', 'initial-scale=1.0, user-scalable=no');
		}
		var mapDiv = document.getElementById('googft-mapCanvas');
		mapDiv.style.width = isMobile ? '100%' : '100%';
		mapDiv.style.height = isMobile ? '100%' : '400px';
		var map = new google.maps.Map(mapDiv, {
			center: new google.maps.LatLng(44.05710463869104, -123.08576476775511),
			zoom: 9,
			mapTypeId: google.maps.MapTypeId.ROADMAP
		});
		map.controls[google.maps.ControlPosition.RIGHT_BOTTOM].push(document.getElementById('googft-legend-open'));
		map.controls[google.maps.ControlPosition.RIGHT_BOTTOM].push(document.getElementById('googft-legend'));

		layer = new google.maps.FusionTablesLayer({
			map: map,
			heatmap: { enabled: false },
			query: {
				select: "col1",
				from: "1w2WiVS4v_rp7e1QB6HNoHvaGk7igE1N5ZztFaiXC",
				where: ""
			},
			options: {
				styleId: 2,
				templateId: 2
			}
		});

		if (isMobile) {
			var legend = document.getElementById('googft-legend');
			var legendOpenButton = document.getElementById('googft-legend-open');
			var legendCloseButton = document.getElementById('googft-legend-close');
			legend.style.display = 'none';
			legendOpenButton.style.display = 'block';
			legendCloseButton.style.display = 'block';
			legendOpenButton.onclick = function() {
				legend.style.display = 'block';
				legendOpenButton.style.display = 'none';
			}
			legendCloseButton.onclick = function() {
				legend.style.display = 'none';
				legendOpenButton.style.display = 'block';
			}
		}
	}

	google.maps.event.addDomListener(window, 'load', initialize);
</script>
</head>

<body>
	<h1>Lane County restaurant inspection scores</h1>
	<div id="googft-mapCanvas"></div>
	<p>Lane County Department of Public Health restaurant inspection scores. All data can be found <a href="http://apps.lanecounty.org/RIS/">here</a>.</p>
	<small>Produced by <a href="mailto:rob.denton@registerguard.com">Rob Denton</a> on 6/17/14.</small>
	<iframe width="500" height="300" scrolling="yes" frameborder="no" src="https://www.google.com/fusiontables/embedviz?viz=GVIZ&amp;t=TABLE&amp;q=select+col0%2C+col1%2C+col2%2C+col3%2C+col4+from+1w2WiVS4v_rp7e1QB6HNoHvaGk7igE1N5ZztFaiXC+order+by+col1+asc&amp;containerId=googft-gviz-canvas"></iframe>
</body>
</html>
